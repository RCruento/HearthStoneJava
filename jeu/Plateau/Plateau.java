package jeu.Plateau;

import jeu.Carte.ICarte;
import jeu.Exception.HearthstoneException;
import jeu.Player.IJoueur;

import java.util.ArrayList;

public class Plateau implements IPlateau {
    private IJoueur player1;
    private IJoueur player2;
    private ArrayList<IJoueur> players;
    private boolean debuter = false;
    private IJoueur joueurCourant;

    private static IPlateau INSTANCE = null;

    /** Point d'accès pour l'instance unique du singleton */
    public static IPlateau getInstance()
    {  if(INSTANCE == null){
        INSTANCE= new Plateau();
        }
        return INSTANCE;
    }

    private Plateau(){}




    //Getter Setter


    public IJoueur getPlayer1() {
        return player1;
    }

    public void setPlayer1(IJoueur player1) {
        this.player1 = player1;
    }

    public IJoueur getPlayer2() {
        return player2;
    }

    public void setPlayer2(IJoueur player2) {
        this.player2 = player2;
    }

    @Override
    public void ajouterJoueur(IJoueur joueur) {
        if(this.players == null) {
            this.players = new ArrayList<IJoueur>();
        }
        if(this.player1 == null ) {
            this.player1 = joueur;
            this.players.add(this.player1);
        }else{
            this.player2 = joueur;
            this.players.add(this.player2);
            }
        }


    public void retirerJoueur(int i){
        if(i==0 || i==1){
            if(i == 0){
                players.remove(i);
            }else {
                if (i == 1) {
                    players.remove(i);
                } else {
                    throw new IllegalArgumentException("Erreur i");
                }
            }
        }
    }

    @Override
    public void demarerPartie() throws HearthstoneException {

        if(players.size() == 0){
            throw new HearthstoneException("Aucun joueur");
        }
        if(players.size()== 1){
            throw new HearthstoneException("Un seul joueur");
        }
        for(int i = 0; i<4;i++){
            this.player1.piocher();
            this.player2.piocher();
        }
        this.debuter = true;
    }

    @Override
    public boolean estDemaree() {
        return this.debuter;
    }

    @Override
    public void gagnerPartie(IJoueur joueur) {
        this.debuter = false;
        System.out.println("Player : "+joueur.getPseudo()+" a gagné la partie");

    }

    @Override
    public void finirTour(IJoueur joueur) throws HearthstoneException {
        setJoueurCourant(joueur);

    }

    @Override
    public IJoueur getAdversaire(IJoueur courantplayer) {
       if( courantplayer == null){
            throw new IllegalArgumentException("Aucun adveraire");
       }
       if(this.joueurCourant.getPseudo().equals(players.get(0).getPseudo())){
            return players.get(1);
       }
       if(this.joueurCourant.getPseudo().equals(players.get(1).getPseudo())){
            return players.get(0);
       }
       return courantplayer;
    }

    @Override
    public IJoueur getJoueurCourant() {
        return this.joueurCourant;
    }

    @Override
    public void setJoueurCourant(IJoueur joueur) {
        this.joueurCourant = joueur;
    }


    public String toString(){
        if(this.getJoueurCourant().getJeu().size() == 0 && this.getAdversaire(this.getJoueurCourant()).getJeu().size() == 0 ){
            return
                    "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+                                                                                                                                                                                             "                                                                |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+                                                                                                                                                           "                                                         |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            this.getJoueurCourant().toString();

        }else if (this.getJoueurCourant().getJeu().size() != 0 && this.getAdversaire(this.getJoueurCourant()).getJeu().size() == 0){
            return
            "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|"+                                                                                                                                                                                            "                                                                |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                    "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                    "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|"+"              "+this.getJoueurCourant().afficherJeu()+                                                                                                                                                           "                                                         |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "|                                                                                                                                                                                                                                                                                                                    |\n"+
                    "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                    this.getJoueurCourant().toString();


        }else if (this.getJoueurCourant().getJeu().size() == 0 && this.getAdversaire(this.getJoueurCourant()).getJeu().size() != 0){
            return
                    "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+"              "+this.getAdversaire(this.getJoueurCourant()).afficherJeu()+                                                                                                                                                                                             "                                                                |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|"+                                                                                                                                                        "                                                         |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "|                                                                                                                                                                                                                                                                                                                    |\n"+
                            "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                            this.getJoueurCourant().toString();


        }
        return
                "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
               "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
               "|"+"              "+this.getAdversaire(this.getJoueurCourant()).afficherJeu()+                                                                                                                                                                                             "                                                                |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
               "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
               "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
               "|"+"--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
               "|"+"              "+this.getJoueurCourant().afficherJeu()+                                                                                                                                                           "                                                         |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "|                                                                                                                                                                                                                                                                                                                    |\n"+
                "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n"+
                        this.getJoueurCourant().toString();

    }






}
